<!DOCTYPE html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TEST PAGE</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="modal.css">
    <link rel="stylesheet" href="dpopdown-menu.css">
    <link rel="stylesheet" href="media-screen.css">
    <script src="script.js"></script> 
  </head>

<body>
  <div class="modal">
    <div class="modal-content">
      <span class="close pointer">&times;</span>
      <p></p>
    </div>
  </div>
  
  <header>
    <div class="top-bar">
      <div class="top-bar-nav">
        <span><a href="#">LOGO</a></span>
        <span><a href="#"><img src="person_d.PNG" class="top-bar-nav-img"></a></span>
        <span><a href="#"><img src="heart-e_d.PNG" class="top-bar-nav-img"></a></span>
        <span><a href="#"><img src="shop_d.PNG" class="top-bar-nav-img"></a></span>
        <span><img src="hamb_d.PNG" class="hamburger-button top-bar-nav-img pointer"></span>
      </div>
    </div>
    
    <div class="hamburger-menu">
      <span class="hamburger-close">&times;</span>
      <span><a href="#">Постельное белье</a></span>
      <span><a href="#">Одежда для дома</a></span>
      <span><a href="#">Одежда для улицы</a></span>
      <span><a href="#">Выход</a></span>
    </div>
  
  </header>

<main>
    
  <section class="mainblock">
      
    <div class="mb-container-img">
      <img src="4.jpg">
      <div class="mb-container-mini">
        <img src="4.jpg" class="mini pointer">
        <img src="5.jpg" class="mini pointer">
        <img src="6.jpg" class="mini pointer">
        <img src="7.jpg" class="mini pointer">
        <img src="8.jpg" class="mini pointer">
      </div>
    </div>
      
    <div class="mb-info">
      <h2 class="mb-info-name">Пижама для девочек</h2>
        
      <div class="mb-info-sku">Арт. 026401/41</div>
        
      <div class="mb-info-feedback fs-standart">
        <span>Отзывы</span>
        <span class="star-1">&#9733;</span>
        <span class="star-2">&#9733;</span>
        <span class="star-3">&#9733;</span>
        <span class="star-4">&#9733;</span>
        <span class="star-5">&#9734;</span>
        <span class="feedback-count">14 отзывов</span>
        <span class="arrow-right pointer">&#10095;</span>
      </div>
        
      <div class="mb-info-price">
        <span class="price-current">800 &#8381;</span>
        <span class="price-old fs-standart">1200 &#8381;</span>
        <span class="arrow-right pointer">&#10095;</span>
      </div>
        
      <div class="mb-info-promo">
        <span class="promo">Скидка -36%</span>
        <span class="promo">Акция -20%</span>
      </div>
        
      <div class="mb-info-size">
        <div class = "size-menu size-btn pointer">
          <span class = "size-btn">Выбрать размер</span>
          <span class = "size-btn">&#5167;</span>
        </div>
        
        <div class="size-dropdown">
          <a href="#">XS</a>
          <a href="#">S</a>
          <a href="#">M</a>
          <a href="#">L</a>
          <a href="#">XL</a>
        </div>
      </div>

      <div class="mb-info-size-table fs-standart"><a href="#">Определить размер</a></div>
        
      <div class="mb-info-actions">
        <div class="actions-count">
          <button class="count-inc pointer">&#43;</button>
          <span class="count-value">1</span>
          <button class="count-dec pointer">&#8722;</button>
        </div>

        <div class="actions-add">
          <div class="add-cart pointer">
            <span class="fs-standart">Добавить в корзину</span>
          </div>
          <div class="add-favorite pointer">
            <img class="like" src="heart-e_l.PNG">
          </div>
        </div>
      </div>

        
      <div class="mb-info-instant fs-standart"><a href="#">Купить в 1 клик</a></div>
      
      <div class="mb-info-extra fs-standart"><span><img src="cloth_d.PNG" class="desc-img"></span><a href="#">Описание товара</a></div>
      
      <div class="mb-info-extra fs-standart"><span><img src="clock_d.PNG" class="desc-img"></span><a href="#">Доставка и возврат</a></div>
      
      <div class="mb-info-extra fs-standart"><span><img src="card_d.PNG" class="desc-img"></span><a href="#">Способы оплаты</a></div>
    
    </div>
  </section>
    
  <div class="divide fs-standart"><a href="#">Посмотреть все стили</a></div>
    
  <section class="gallery">
    <div class="sub-gallery"><img src="9.jpg"></div>
    
    <div class="sub-gallery"><img src="10.jpg"></div>
    
    <div class="sub-gallery"><img src="11.jpg"></div>
    
    <div class="sub-gallery"><img src="12.jpg"></div>
    
    <div class="sub-gallery"><img src="13.jpg"></div>
    
    <div class="sub-gallery sub-gallery-overlayer fs-standart">
      <div class="sub-gallery-picture">
        <span><img src="set_l.PNG" class="top-bar-nav-img"></span>
      </div>
      
      <div class="sub-gallery-clothes pointer">
        <span><img src="shop_l.PNG" class="add-img"></span>
        <span>Узнай, что на мне</span>
      </div>
     
      <div class="sub-gallery-likes">
        <span><img src="heart-f_l.PNG" class="desc-img"></span>
        <span class="sub-gallery-likecount">200</span>
      </div>
    </div>
  </section>

</main>

<footer>
  <div class="bottom-info fs-standart">
    <div class="bot-nav">
      <span>Покупателям</span>
      <span><a href="#">Каталог</a></span>
      <span><a href="#">Акции</a></span>
      <span><a href="#">Бренды</a></span>
    </div>
    
    <div class="bot-nav">
      <span>О нас</span>
      <span><a href="#">О компании</a></span>
      <span><a href="#">Новости</a></span>
      <span><a href="#">Команда</a></span>
    </div>
  </div>
  
  <div class="bottom-subscribe">
    <form id="email-form" class="subscribe-form">
      <span>Узнайте&nbsp;первым&nbsp;о новинках&nbsp;и&nbsp;акциях</span>
      <div class="email-input">
        <input form="email-form" class="email" type="email" placeholder="Адрес электронной почты">
        <span class="close erase-email">&times;</span>
      </div>
      <input type="submit" form="email-form" class="subscribe-button pointer" value="Подписаться">
    </form>
  </div>
</footer>

</body>

<script>

  /* Гамбургер меню */
  let hamButtonMenu = document.querySelector('.hamburger-button');
  let hamDropMenu = document.querySelector('.hamburger-menu');
  let hamClose = document.querySelector('.hamburger-close');
  let hamMenuItems = document.querySelectorAll('.hamburger-menu-item');

  hamButtonMenu.onclick = function() {
    hamDropMenu.style.display = "flex";
  }

  hamClose.onclick = function() {
    hamDropMenu.removeAttribute('style');
  }

  for (let hamMenuItem of hamMenuItems) {
    hamMenuItem.onclick = function() {
      hamDropMenu.removeAttribute('style');
    }
  }
  
  window.onclick = function (event) {
    if (event.target !== hamButtonMenu && hamDropMenu.getAttribute('style')) {
      hamDropMenu.removeAttribute('style');
    }
  }
  
  /* Клик по миниатюре */
  let miniImages = document.querySelectorAll('.mini');
  let mainImage = document.querySelector('.main');
  let mainImg = mainImage.getAttribute('src');
        
  miniImages[0].setAttribute('style', 'opacity:1');
        
  for (let miniImage of miniImages) {
    miniImage.onclick = function() {
      let activePath =  miniImage.getAttribute('src');
      mainImage.setAttribute('src', activePath);
      miniImage.setAttribute('style', 'opacity:1');
            
      for (let miniImg of miniImages) {
        let miniPath = miniImg.getAttribute('src');
        if (miniPath !== activePath) {
          miniImg.removeAttribute('style');
        }
      }
    }
  }

  /* Выпадающее меню выбора размера */
  let dropDownMenu = document.querySelector('.dropdown-content');
  let dropButtons = document.querySelectorAll('.drop-btn')

  for (let dropButton of dropButtons) {
    dropButton.onclick = function(event) {
      event.stopPropagation()
      dropDownMenu.classList.toggle('show');
      /*if (event.target.classList.contains('drop-btn')) {
        dropDownMenu.classList.toggle('show');
      } else if (dropDownMenu.classList.contains('show')) {
        dropDownMenu.classList.remove('show'); 
        // код на случай если получится заставить работать addEventListener на iOS
      }*/
    };
  };
        
  /* Увеличить и уменьшить количество */
  let plusCart = document.querySelector('.count-inc');
  let numCart = document.querySelector('.count-value');
  let minusCart = document.querySelector('.count-dec');
  let cartCount = Number(numCart.textContent);

  plusCart.onclick = function() {
    cartCount += 1;
    numCart.textContent = cartCount;
  };

  minusCart.onclick = function() {
    cartCount -=1 ? cartCount > 1 : cartCount = 1;
    numCart.textContent = cartCount;
  };
          
  /* Добавить в Корзину */
  let nameItem = document.querySelector('h2').textContent;
  let addCartButton = document.querySelector('.add-cart');

  window.addEventListener('click', function(){
    if (event.target.classList.contains('adder')) {
      modalContent.textContent = 'Товар "' + nameItem + '" в количестве ' + cartCount + ' шт. добавлен в корзину';
      modal.style.display = "block";
      modal.classList.remove("hidden");

      setTimeout(function(){
        modal.classList.add("hidden");
      }, 2000);
    }
  });
  
  /*Добавить в Избранное */
  let likeButton = document.querySelector('.like-empty');
  let modalContent = document.querySelector('.modal-content p');
  let modal = document.querySelector('.modal');
  let span = document.getElementsByClassName("close")[0];

  likeButton.onclick = function () {
    let likeChoose = document.querySelector('.like').getAttribute('src');
    if (likeChoose == 'img/heart-f_l.png') {
      document.querySelector('.like').setAttribute('src', 'img/heart-e_l.png');
      modalContent.textContent = 'Товар "' + nameItem + '" удален из избранного';
    } else {
      document.querySelector('.like').setAttribute('src', 'img/heart-f_l.png');
      modalContent.textContent = 'Товар "' + nameItem + '" добавлен в избранное';
    };
    modal.style.display = "block";
    modal.classList.remove("hidden");
            
    setTimeout(function(){
      modal.classList.add("hidden");
    }, 1200);
  }
          
  /* Закрытие модального окна */
  span.onclick = function() {
    modal.style.display = "none";
  }

  window.addEventListener('click', function(event) {
    if (event.target == modal) {
      modal.style.display = "none";
    }
  });
  
  /* удаление Email */
  let eraseButton = document.querySelector('.erase-email');
  let emailField = document.querySelector('.email')

    eraseButton.onclick = function() {
      if (emailField.value) {
        emailField.value='';
      }
    }

</script>
</html>
   
